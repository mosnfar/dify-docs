# الگو

الگو به شما امکان می‌دهد تا به‌طور پویا متغیرها از گره‌های قبلی را با استفاده از Jinja2، یک نحو قدرتمند قالب‌بندی برای پایتون، به یک خروجی متنی واحد فرمت کنید و ترکیب کنید. این گره برای ترکیب داده‌ها از منابع مختلف به ساختار خاصی که برای گره‌های بعدی لازم است، مفید است. مثال ساده‌ی زیر نشان می‌دهد که چگونه می‌توان یک مقاله را با کنار هم قرار دادن خروجی‌های قبلی مونتاژ کرد:

<figure><img src="../../../.gitbook/assets/image (158).png" alt="" width="375"><figcaption></figcaption></figure>

علاوه بر موارد استفاده‌ی ساده، می‌توانید طبق [مستندات](https://jinja.palletsprojects.com/en/3.1.x/templates/) Jinja، الگوهای پیچیده‌تری برای انواع کارها ایجاد کنید. در اینجا یک الگو وجود دارد که قطعات بازیابی شده و فراداده‌های مرتبط آنها را از یک گره‌ی بازیابی دانش به یک فرمت مارک‌داون ساختاریافته تبدیل می‌کند:

```Plain
{% raw %}
{% for item in chunks %}
### بخش {{ loop.index }}. 
### شباهت: {{ item.metadata.score | default('N/A') }}

#### {{ item.title }}

##### محتوا
{{ item.content | replace('\n', '\n\n') }}

---
{% endfor %}
{% endraw %}
```

<figure><img src="../../../.gitbook/assets/image (159).png" alt=""><figcaption></figcaption></figure>

این گره‌ی الگو را می‌توان در یک Chatflow استفاده کرد تا خروجی‌های میانی را قبل از راه‌اندازی پاسخ LLM به کاربر نهایی برگرداند.

> گره‌ی "پاسخ" در یک Chatflow انتهایی نیست. می‌توان آن را در هر جایی قرار داد تا در چندین نقطه از جریان، پاسخ‌ها را خروجی دهد.
